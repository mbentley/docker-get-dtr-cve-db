mbentley/get-dtr-cve-db
=======================

## Build (Optional)
**Note**: This utilizes a multi-stage build and requires Docker 17.05 or newer.  The Docker image is also available from [Docker Hub](https://hub.docker.com/r/mbentley/get-dtr-cve-db/)

```
docker build -t mbentley/get-dtr-cve-db:latest .
```

## Run
Default run command with all default environment variables specified:

```
docker run -it --rm \
  -v ${HOME}/Downloads:/data \
  -e CLOBBER_FILE=false \
  -e DATABASE_OUTPUT="/data" \
  -e DATABASE_SCHEMA=2 \
  -e DEBUG=false \
  -e LICENSE_FILE="/data/docker_subscription.lic" \
  -e VERSION_ONLY=false \
  mbentley/get-dtr-cve-db:latest
```

Using the above example, if I have my Docker EE license file at `~/Downloads/docker_subscription.lic` and I want the container to output the database file to `~/Downloads`, the above command will work as expected because the volume is being mapped from my machine into the container.  If either the license or destination for the database exists in a separate directory, you would need an additional volume defined.

### Runtime environment variables overrides
**Note**: these are the values **inside** the container.  You must pass the actual parent directories as one or more volumes.
  * `CLOBBER_FILE` - defaults to `false`
    * Set to `true` to overwrite an existing file of the same database name
  * `DATABASE_OUTPUT` - defaults to `/data`
    * Specifies the directory to where the database will be downloaded **inside** the container
  * `DATABASE_SCHEMA` - defaults to `2`
    * `1` - DTR 2.2.5 or lower
    * `2` - DTR 2.2.6 or higher
  * `DEBUG` - defaults to `false`
    * Set to `true` to execute the script with `set -x`
  * `LICENSE_FILE` - defaults to `/data/docker_subscription.lic`
    * Location of the license **inside** the container
  * `VERSION_ONLY` - defaults to `false`
    * Set to `true` to output the CVE database version number
